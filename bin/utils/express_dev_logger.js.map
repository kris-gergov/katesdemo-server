{"version":3,"sources":["../../src/utils/express_dev_logger.ts"],"sourcesContent":["import express from 'express';\r\n\r\nexport const expressDevLogger = (req: express.Request, res: express.Response, next: express.NextFunction): void => {\r\n  const startHrTime = process.hrtime();\r\n\r\n  console.log(`Request: ${req.method} ${req.url} at ${new Date().toUTCString()}, User-Agent: ${req.get('User-Agent')}`);\r\n  console.log(`Request Body: ${JSON.stringify(req.body)}`);\r\n\r\n  const [oldWrite, oldEnd] = [res.write, res.end];\r\n  const chunks: Buffer[] = [];\r\n  (res.write as unknown) = function (chunk: any): void {\r\n    chunks.push(Buffer.from(chunk));\r\n    (oldWrite as Function).apply(res, arguments);\r\n  };\r\n\r\n  res.end = function (chunk: any): any {\r\n    if (chunk) {\r\n      chunks.push(Buffer.from(chunk));\r\n    }\r\n\r\n    const elapsedHrTime = process.hrtime(startHrTime);\r\n    const elapsedTimeInMs = elapsedHrTime[0] * 1000 + elapsedHrTime[1] / 1e6;\r\n\r\n    console.log(`Response ${res.statusCode} ${elapsedTimeInMs.toFixed(3)} ms`);\r\n\r\n    const body = Buffer.concat(chunks).toString('utf8');\r\n    console.log(`Response Body: ${body}`);\r\n    (oldEnd as Function).apply(res, arguments);\r\n  };\r\n\r\n  next();\r\n};\r\n"],"names":["expressDevLogger","req","res","next","startHrTime","process","hrtime","console","log","method","url","Date","toUTCString","get","JSON","stringify","body","oldWrite","oldEnd","write","end","chunks","chunk","push","Buffer","from","apply","arguments","elapsedHrTime","elapsedTimeInMs","statusCode","toFixed","concat","toString"],"mappings":"AAAA;;;;;AAEO,MAAMA,gBAAgB,GAAG,CAACC,GAAoB,EAAEC,GAAqB,EAAEC,IAA0B,GAAW;IACjH,MAAMC,WAAW,GAAGC,OAAO,CAACC,MAAM,EAAE,AAAC;IAErCC,OAAO,CAACC,GAAG,CAAC,CAAC,SAAS,EAAEP,GAAG,CAACQ,MAAM,CAAC,CAAC,EAAER,GAAG,CAACS,GAAG,CAAC,IAAI,EAAE,IAAIC,IAAI,EAAE,CAACC,WAAW,EAAE,CAAC,cAAc,EAAEX,GAAG,CAACY,GAAG,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC;IACtHN,OAAO,CAACC,GAAG,CAAC,CAAC,cAAc,EAAEM,IAAI,CAACC,SAAS,CAACd,GAAG,CAACe,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;IAEzD,MAAM,CAACC,QAAQ,EAAEC,MAAM,CAAC,GAAG;QAAChB,GAAG,CAACiB,KAAK;QAAEjB,GAAG,CAACkB,GAAG;KAAC,AAAC;IAChD,MAAMC,MAAM,GAAa,EAAE,AAAC;IAC3BnB,GAAG,CAACiB,KAAK,GAAe,SAAUG,KAAU,EAAQ;QACnDD,MAAM,CAACE,IAAI,CAACC,MAAM,CAACC,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC;QAChC,AAACL,QAAQ,CAAcS,KAAK,CAACxB,GAAG,EAAEyB,SAAS,CAAC,CAAC;KAC9C,CAAC;IAEFzB,GAAG,CAACkB,GAAG,GAAG,SAAUE,KAAU,EAAO;QACnC,IAAIA,KAAK,EAAE;YACTD,MAAM,CAACE,IAAI,CAACC,MAAM,CAACC,IAAI,CAACH,KAAK,CAAC,CAAC,CAAC;SACjC;QAED,MAAMM,aAAa,GAAGvB,OAAO,CAACC,MAAM,CAACF,WAAW,CAAC,AAAC;QAClD,MAAMyB,eAAe,GAAGD,aAAa,CAAC,CAAC,CAAC,GAAG,IAAI,GAAGA,aAAa,CAAC,CAAC,CAAC,GAAG,GAAG,AAAC;QAEzErB,OAAO,CAACC,GAAG,CAAC,CAAC,SAAS,EAAEN,GAAG,CAAC4B,UAAU,CAAC,CAAC,EAAED,eAAe,CAACE,OAAO,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;QAE3E,MAAMf,IAAI,GAAGQ,MAAM,CAACQ,MAAM,CAACX,MAAM,CAAC,CAACY,QAAQ,CAAC,MAAM,CAAC,AAAC;QACpD1B,OAAO,CAACC,GAAG,CAAC,CAAC,eAAe,EAAEQ,IAAI,CAAC,CAAC,CAAC,CAAC;QACtC,AAACE,MAAM,CAAcQ,KAAK,CAACxB,GAAG,EAAEyB,SAAS,CAAC,CAAC;KAC5C,CAAC;IAEFxB,IAAI,EAAE,CAAC;CACR,AAAC;QA7BWH,gBAAgB,GAAhBA,gBAAgB"}